{% extends 'base/base.html' %}

{% load static %}

{% block title %}
    Authentication
{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'authentication/css/styles.css' %}">
{% endblock %}

{% block content %}
    <form method="POST" id="loginForm">
        {% csrf_token %}
        <input type="text" name="username" placeholder="Username" required>
        {% if username_error and not is_register %}
            <p class="error">{{ username_error }}</p>
        {% endif %}
        <input type="password" name="password" placeholder="Password" required>
        {% if password_error and not is_register %}
            <p class="error">{{ password_error }}</p>
        {% endif %}
        <button type="submit">Login</button>
        <a href="#register" onclick="toggleForm()">Register</a>
        {% if non_field_error and not is_register %}
            <p class="error">{{ non_field_error }}</p>
        {% endif %}
        {% if success %}
            <p class="message">{{ success }}</p>
        {% endif %}
    </form>
    <form method="POST" id="registerForm" class="hidden-form" action="{% url 'users:create' %}">
        {% csrf_token %}
        <input type="text" name="is_staff" value="True" hidden>
        <input type="text" name="username" placeholder="Username" required>
        {% if username_error and is_register %}
            <p class="error">{{ username_error }}</p>
        {% endif %}
        <input type="password" name="password" placeholder="Password" required>
        {% if password_error and is_register %}
            <p class="error">{{ password_error }}</p>
        {% endif %}
        <input type="password" name="password_confirm" placeholder="Confirm Password" required>
        {% if password_confirm_error and is_register %}
            <p class="error">{{ password_confirm_error }}</p>
        {% endif %}
        <button type="submit">Register</button>
        <a href="#login" onclick="toggleForm()">Login</a>
        {% if non_field_error and is_register %}
            <p class="error">{{ non_field_error }}</p>
        {% endif %}
    </form>
{% endblock %}

{% block scripts %}
    <script src="{% static 'authentication/js/scripts.js' %}"></script>
    {% if is_register %}
        <script>
            toggleForm();
        </script>
    {% endif %}
{% endblock %}